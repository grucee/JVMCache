# JVMCache
1、LazyLoadCacheMap.java:一个懒加载的缓存map，在key值上面加锁，适合key值是String的情况。

应用场景：
懒加载缓存，只有get没有set；当执行get操作，而在本地jvm并没有已经缓存的对象时，才去加载；并且保证只有一个线程会去加载。
特点：
（1）、在key上面加锁，因此一个key的获取不会阻塞另外一个key的获取。
（2）、针对key为String，有特殊的优化，因为不适合在String类型的对象上面加锁。之所以不适合在String对象上面加锁，是因为值相同的两个String对象，根据他们构造方式的不同，可能指向不同的对象，因此造成非线程安全问题。一般情况下，只有编译期间可以确定下来的的字符串才能存放到缓冲区中。
针对String的加锁：synchronized(key.intern()),这样保证是在常量池中的该string进行加锁。
这样做的坏处是可能有大量的字符串被加入到 方法区(常量池），而方法区属于永久带，基本不进行垃圾回收。

2、其他类实现了一个结合页面通知或者zookeeper动态通知机制，可以自动刷新的jvm缓存。
(1)更新规则：对某个缓存执行变更后,将变更的唯一标识写入zookeeper,zookeeper在通知刷新了本缓存后，需要将该标识删除
(2)更新锁粒度：首先是各个标识对应的缓存之间不互相影响；另外就是读取同一个标识的时候不应该有锁；只有在同时读和写同一个serviceCode时候才需要加锁（读写锁）。
